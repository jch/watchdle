<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]>      <html class="no-js"> <!--<![endif]-->
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Watchdle</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="">

        <script src="https://code.jquery.com/jquery-3.6.1.slim.min.js" integrity="sha256-w8CvhFs7iHNVUtnSP0YKEg00p9Ih13rlL9zGqvLdePA=" crossorigin="anonymous"></script>

        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>

    </head>
    <body class="container">
        <!--[if lt IE 7]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="#">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->
        <form id="guessForm" class="container text-center">
            <div class="mb-3">
                <img id="guessImage" src="" class="img-fluid" />
                <label for="guessImage" class="form-label fw-light fst-italic"><a id="puzzleSource" href="#">Source</a></label>
            </div>
            <div class="mb-3">
                <div class="form-check-inline">
                    <input class="form-check-input" type="checkbox" name="inlineCheckOptions" id="inlineCheck1" value="1" disabled>
                  </div>
                  <div class="form-check-inline">
                    <input class="form-check-input" type="checkbox" name="inlineCheckOptions" id="inlineCheck2" value="2" disabled>
                  </div>
                  <div class="form-check-inline">
                    <input class="form-check-input" type="checkbox" name="inlineCheckOptions" id="inlineCheck3" value="3" disabled>
                  </div>
                  <div class="form-check-inline">
                    <input class="form-check-input" type="checkbox" name="inlineCheckOptions" id="inlineCheck4" value="4" disabled>
                  </div>
                  <div class="form-check-inline">
                    <input class="form-check-input" type="checkbox" name="inlineCheckOptions" id="inlineCheck5" value="5" disabled>
                  </div>
            </div>
            <div class="mb-3">
                <input id="guessField" type="text" class="form-control" placeholder="Enter Make and Model eg: Rolex Daytona">
            </div>
            <div class="form-text">
                <span>No idea? <a href="#" onclick="$('#guessForm').submit()">Skip to next clue</a></span>
            </div>
            <h2 id="answer" class="invisible"></h1>
        </form>
        <ol id="guessList">

        </ol>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>
        <script async defer>
            const puzzles = {
                '2022-10-12': {name: 'Casio A158-DV1', nicknames: ["Casio Duro", "Casio A158"], source: "https://www.reddit.com/r/casio/comments/y00q03/i_really_regret_selling_this_seems_to_be_pretty/"},
            };

            const date = new Date();
            const datePath =  [date.getFullYear(), date.getMonth()+1, date.getDate()].join("-");
            const puzzlePath = ['puzzles', datePath].join("/");
            var guessCount = 1;
            var guess = "";
            var puzzle = puzzles[datePath];

            function loadImage(i) {
                const imagePath = `${puzzlePath}/${i}.jpg`;
                $("#guessImage").attr("src", imagePath);
            }

            function reveal() {
                $("#answer").attr("class", "visible");
                loadImage(5);
            }

            function setup() {
                loadImage(1);
                $("#answer").text(puzzle.name);
                $("#puzzleSource").attr("href", puzzle.source);
                $("#guessField").focus();
            }

            $("#guessForm").submit(function(e) {
                var guess = document.getElementById("guessField").value || "";
                guess = guess.trim().toLowerCase();
                var li = $("<li>" + guess + "</li>");

                $("#guessList").append(li);
                $("#inlineCheck"+guessCount).attr("checked", 1);
                if (guessCount == 5) {
                    reveal();
                    return;
                }

                guessCount += 1;
                loadImage(guessCount);

                if (puzzle.nicknames.find(e => e.toLowerCase() == guess)) {
                    $("#guessList li:last").attr("class", "fw-bold text-success")
                    reveal();
                    e.preventDefault();
                    return;
                }
                $("#guessField").val("");
            });

            setup();
        </script>
    </body>
</html>